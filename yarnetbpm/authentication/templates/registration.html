{% extends 'unauth_index.html' %}

{% block page_title %}
	Панель управления | Регистрация
{% endblock %}

{% block main %}
  <div class="coonteiner-fluid vh-100 d-flex justify-content-center align-items-center">
    <div class="card w-25">
      <div class="card-body">
        {% if error_message != None %}
          <div class="bg-danger-transparent-2 text-danger px-4 py-2 br-3 mb-4" role="alert">
            {{ error_message }}
          </div>
        {% endif %}

        <form class="form-control border-0" method="POST" action="">
          <div class="login-block mb-5">
            <label for="login-input">
              Логин
            </label>

            <input
              id="login-input"
              class="form-control"
              name="login"
              minlength="3"
              placeholder="Латинские буквы, арабские цифры, символ _"
              pattern="^[A-Za-z\d_]+?$"
              required
            />
          </div>

          <div class="email-block mb-5">
            <label for="email-input">
              Электронная почта
            </label>

            <input
              id="email-input"
              class="form-control"
              name="email"
              type="email"
              placeholder="abcdef@gh.ik"
              pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
              required
            />
          </div>

          <div class="fullname-block mb-5">
            <label for="fullname-input">
              ФИО
            </label>

            <input
              id="fullname-input"
              class="form-control"
              name="fullname"
              placeholder="Иванов Иван Иванович"
              required
            />
          </div>

          <div class="password-block mb-5">
            <label for="password-input">
              Пароль
            </label>

            <input
              id="password-input"
              class="form-control"
              name="password"
              type="password"
              minlength="6"
              maxlength="32"
              required
            />
          </div>

          <div class="password-block mb-5">
            <label for="password-input">
              Повторите пароль
            </label>

            <input
              id="password-confirm"
              class="form-control"
              type="password"
              minlength="6"
              maxlength="32"
              oninput="check(this)"
              required
            />
          </div>

          <div class="d-flex flex-row justify-content-between">
            <button type="submit" class="btn btn-outline-success">
              Регистрация
            </button>
            <a href="/auth/login/?next={{ next_url }}" class="btn btn-primary">
              Войти
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script language='javascript' type='text/javascript'>
  function check(input) {
      if (input.value != $('#password-input').value()) {
          input.setCustomValidity('Пароли не совпадают.');
      } else {
          input.setCustomValidity('');
      }
  }
</script>
{% endblock %}