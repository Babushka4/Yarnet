{% block sidebar_content %}
  <div class="border-bottom mb-5">
    <div class="mb-5">
      <div>
          <label>Заголовок задачи<label>
      </div>

      <div>
        <input type="text" class="form-control" name="task_name" />
      </div>
    </div>
    {% for field in regulations.first_stage.fields_set.all %}
      <div class="mb-5">
        <div>
            <label>{{ field.title }}<label>
        </div>

        <input type="hidden" name="reg_id" value="{{ regulations.id }}" />


        {% if field.field_type == field_types.STRING %}
          <div>
            <input type="text" class="form-control" name="value_{{ field.id }}" />
          </div>
        {% elif field.field_type == field_types.INTEGER %}
          <div>
            <input type="number" class="form-control" name="value_{{ field.id }}" />
          </div>
        {% elif field.field_type == field_types.NUM %}
          <div>
            <div class="input-icon">
              <span class="input-icon-addon">
                №
              </span>
              <input
                type="text"
                class="form-control"
                name="value_{{ field.id }}"
                placeholder="999 999"
              />
            </div>
          </div>
        {% elif field.field_type == field_types.DATE %}
          <div>
            <div class="input-group">
              <input
                class="form-control"
                type="text" 
                name="value_{{ field.id }}"
                placeholder="23:59 31.12.9999"
                pattern="^([0-1][0-9]|2[1234]):([0-5][0-9]) ([0-2][0-9]|3[01])\.(0[0-9]|1[0-2])\.(\d{4})$"
              >
            </div>
          </div>
        {% elif field.field_type == field_types.FLOAT %}
          <div>
            <input
              type="number"
              class="form-control"
              name="value_{{ field.id }}"
              min="0.00"
              step="1"
            />
          </div>
        {% elif field.field_type == field_types.FILE %}
          <div>
            <input type="file" class="form-control">
          </div>
        {% elif field.field_type == field_types.LIST %}
          <div>
            <select
              class="form-control select2 form-select"
              data-placeholder="Choose one"
              name="value_{{ field.id }}"
            >
              <option label="Выберите из списка">
              </option>

              {% for value in field.values_set.all %}
                <option value="{{ value.id }}">{{ value.value }}</option>
              {% endfor %}
            </select>
          </div>
        {% elif field.field_type == field_types.USER %}
          <div>
            <select
              class="form-control select2 form-select"
              data-placeholder="Choose one"
              name="value_{{ field.id }}"
            >
              <option label="Выберите пользователя">
              </option>

              {% for user in all_users %}
                <option value="{{ user.id }}">{{ user.fullname }}</option>
              {% endfor %}
            </select>
          </div>
        {% elif field.field_type == field_types.COMPANY %}
          <div>
            <select
              class="form-control select2 form-select"
              data-placeholder="Choose one"
              name="value_{{ field.id }}"
            >
              <option label="Выберите организацию">
              </option>

              {% for company in all_companies %}
                <option value="{{ company.id }}">{{ company.name }}</option>
              {% endfor %}
            </select>
          </div>
        {% else %}

        {% endif %}

        
      </div>
    {% endfor %}
    
    <div class="mb-5">
      <div>
        <label>Исполнитель<label>
      </div>

      <div>
        <select
          class="form-control select2 form-select"
          data-placeholder="Choose one"
          name="task_performer"
        >
          <option label="Выберите пользователя">
          </option>

          {% for user in all_users %}
            <option value="{{ user.id }}">{{ user.fullname }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </div>

  <div class="d-flex flex-column w-100 align-self-end mt-auto">
    <button type="submit" class="btn btn-success btn-lg mb-3">Создать заявку</button>
    <button type="button" class="btn btn-light btn-lg">Архивировать</button>
  </div>
{% endblock sidebar_content %}